{% extends 'CoyoteSiteBundle::base.html.twig' %}

{% block user %}

{{ 'Bienvenue'|trans }} {{ app.session.get('username') }} |
<a href="{{ path('fos_user_security_logout') }}">
    {{ 'layout.logout'|trans({}, 'FOSUserBundle') }}
</a>

{% endblock %}

{% block javascripts %}
        <script src="{{ asset('bundles/coyotesite/js/jquery-min.js') }}"/></script>
        <script src="{{ asset('bundles/coyotesite/js/script_formorder.js') }}"/></script>
{% endblock %}

{% block link %}
    
    <!--[if lt IE 9]>
        {{ include('CoyoteSiteBundle::navigation_ie.html.twig') }}
    <![endif]-->
    <!--[if !IE]><!-->
        {{ include('CoyoteSiteBundle::navigation.html.twig') }}
	<!--<![endif]-->
	
{% endblock %}

{% block content %}

<h2>Formulaire Bon de commande</h2>
<h3>Pièces détachées</h3>

<form action="{{ path('formorder_create') }}" method="post" {{ form_enctype(form) }}>
    <table id='table_temps' class='table'>
        <tr>
            <th>Date de la commande : </th>
            <td>{{ form_errors(form.created_at) }}{{ form_widget(form.created_at)}}</td>
        
            <th>Livraison : </th>
            <td>{{ form_errors(form.transport) }}{{ form_widget(form.transport)}}</td>
        </tr>
        <tr>
            <th colspan="4">Client (Adresse de facturation)</th>
        </tr>
        <tr>
            <th><input type="radio" name="typeclient" value="Concessionnaire" > Concessionnaire</input></th>
            <th><input type="radio" name="typeclient" value="client" > Client</input></th>
            <th>Code client : </th>
            <td><input type="text" name="codeclient"></input></td>
        </tr>
        <tr>
            <th>NOM Prénom : </th>
            <td colspan="3">{{ form_errors(form.user.name) }}{{ form_widget(form.user.name)}}</td>
        </tr>
        <tr>
            <th>Adresse : </th>
            <td colspan="3">{{ form_errors(form.user.adress1) }}{{ form_widget(form.user.adress1)}}</td>
        </tr>
        <tr>
            <th>Adresse(suite) : </th>
            <td colspan="3">{{ form_errors(form.user.adress2) }}{{ form_widget(form.user.adress2)}}</td>
        </tr>
        <tr>
            <th>Ville : </th>
            <td>{{ form_errors(form.user.city) }}{{ form_widget(form.user.city)}}</td>
            <th>Code Postal : </th>
            <td>{{ form_errors(form.user.postal_box) }}{{ form_widget(form.user.postal_box)}}</td>
        </tr>
        <tr>
            <th>Téléphone : </th>
            <td>{{ form_errors(form.user.phone) }}{{ form_widget(form.user.phone)}}</td>
            <th>Fax : </th>
            <td>{{ form_errors(form.user.fax) }}{{ form_widget(form.user.fax)}}</td>
        <tr>
            <th>Portable : </th>
            <td>{{ form_errors(form.user.cell) }}{{ form_widget(form.user.cell)}}</td>
            <th>Email : </th>
            <td>{{ form_errors(form.user.email) }}{{ form_widget(form.user.email)}}</td>
        </tr>
        <tr>
            <th colspan='3'>Adresse de livraison (si différente de l'adresse de facturation)</th>
            <td><input type="checkbox" name='livraison' id='livraison'></td>
        </tr>
        <tr>
            <th>Raison sociale : </th>
            <td colspan='3'>{{ form_errors(form.deliveryaddress.corporate_name) }}{{ form_widget(form.deliveryaddress.corporate_name)}}</td>
        </tr>
        <tr>
            <th>NOM Prénom : </th>
            <td colspan='3'>{{ form_errors(form.deliveryaddress.name) }}{{ form_widget(form.deliveryaddress.name)}}</td>
        </tr>
        <tr>
            <th>Adresse : </th>
            <td colspan='3'>{{ form_errors(form.deliveryaddress.adress1) }}{{ form_widget(form.deliveryaddress.adress1)}}</td>
        </tr>
        <tr>    
            <th>Adresse(suite) : </th>
            <td colspan='3'>{{ form_errors(form.deliveryaddress.adress2) }}{{ form_widget(form.deliveryaddress.adress2)}}</td>
        </tr>
        <tr>
            <th>Ville : </th>
            <td>{{ form_errors(form.deliveryaddress.city) }}{{ form_widget(form.deliveryaddress.city)}}</td>
            <th>Code Postal : </th>
            <td>{{ form_errors(form.deliveryaddress.postal_box) }}{{ form_widget(form.deliveryaddress.postal_box)}}</td>
        </tr>
        <tr>
            <th>Téléphone : </th>
            <td>{{ form_errors(form.deliveryaddress.phone) }}{{ form_widget(form.deliveryaddress.phone)}}</td>
            <th>Fax : </th>
            <td>{{ form_errors(form.deliveryaddress.fax) }}{{ form_widget(form.deliveryaddress.fax)}}</td>
        </tr>
        <tr>
            <th>Portable : </th>
            <td>{{ form_errors(form.deliveryaddress.cell) }}{{ form_widget(form.deliveryaddress.cell)}}</td>
            <th>Email : </th>
            <td>{{ form_errors(form.deliveryaddress.email) }}{{ form_widget(form.deliveryaddress.email)}}</td>
        </tr>
    </table>
    <table id='table_temps' class='table'>
        <tr>
            <th>N° de série de la machine</th>
            <td colspan="2"><input type="text" id="machine"</td>
        </tr>
        <tr>
            <th>Code</th>
            <th>Désignation</th>
            <th>Quantité</th>
        </tr>
        {% for i in 0..10 %}
        <tr >
            <td>
                <select name={{'selectitem'~ i}} id={{'selectitem'~ i}} >
                    <option value='aucune'></option>
                    {% for data in item %}
                    <option value={{ data.id }} name="{{'item'~ loop.index0}}">{{data.code}}</option>        
                    {% endfor %}
                </select>
            </td>
            {#<td><input style="width: 150px" class='input' type='text' maxlength='10' name='code' id={{'code'~ i }} value='' /></td>#}
            <td><input style="width: 150px" class='input' type='text' name={{'designation'~ i }} id={{'designation'~ i }} value=''/></td>
            <td><input style="width: 150px" class='input' type='text' maxlength='5' name={{'quantite'~ i }} id={{'quantite'~ i }} value=''/></td>
        </tr>
        {% endfor %}
        

    </table>
    <button class='btnsave' type="submit" value="Enregistrer" id="enregistrer">{{ 'Créer'|trans }}</button>
  </form>

{% endblock %}


{#{% extends '::base.html.twig' %}

{% block body -%}
    <h1>FormOrder creation</h1>

    {{ form(form) }}

        <ul class="record_actions">
    <li>
        <a href="{{ path('formorder') }}">
            Back to the list
        </a>
    </li>
</ul>
{% endblock %}#}
